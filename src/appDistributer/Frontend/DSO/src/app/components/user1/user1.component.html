<main
  class="main-content position-relative border-radius-lg col-12"
  style="overflow-y: scroll; max-height: 89.1vh"
>
  <div class="container-fluid py-4" id="userInfoDataContainer">
    <div class="row">
      <div class="col-lg-7 mb-lg-0 mb-4">
        <div class="row mt-2">
          <div
            class="col-xl-4 col-sm-4 mb-xl-0 mb-4"
            style="display: flex; justify-content: center"
          >
            <div class="card" style="display: flex; justify-content: center">
              <div class="card-body">
                <div class="col-lg-12">
                  <div class="row">
                    <div class="d-flex" style="justify-content: center">
                      <img
                        src="assets/images/num3.png"
                        style="
                          width: 30%;
                          display: flex;
                          justify-content: center;
                          margin-bottom: 3%;
                        "
                      />
                    </div>

                    <h5 style="display: flex; justify-content: center">
                      {{ realDeviceCount }} ({{deviceCount}} visible)
                    </h5>
                    <small
                      class="text-muted mt-0"
                      style="
                        display: flex;
                        justify-content: center;
                        font-size: 16px;
                      "
                      >Number of devices</small
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="col-xl-4 col-sm-4 mb-xl-0 mb-4"
            style="display: flex; justify-content: center"
          >
            <div class="card" style="display: flex; justify-content: center">
              <div class="card-body">
                <div class="col-lg-12">
                  <div class="row">
                    <div class="d-flex" style="justify-content: center">
                      <img
                        src="assets/images/potrosnjaCon.png"
                        style="
                          width: 30%;
                          display: flex;
                          justify-content: center;
                        "
                      />
                    </div>

                    <h5 style="display: flex; justify-content: center">
                      {{ currentConsumption.toFixed(2) }} kWh
                    </h5>
                    <small
                      class="text-muted mt-0"
                      style="
                        display: flex;
                        justify-content: center;
                        font-size: 16px;
                      "
                      >Current Consumption</small
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="col-xl-4 col-sm-4 mb-xl-0 mb-4"
            style="display: flex; justify-content: center"
          >
            <div class="card" style="display: flex; justify-content: center">
              <div class="card-body">
                <div class="col-lg-12">
                  <div class="row">
                    <div class="d-flex" style="justify-content: center">
                      <img
                        src="assets/images/proizvodnjaPro.png"
                        style="
                          width: 30%;
                          display: flex;
                          justify-content: center;
                          margin-bottom: 7%;
                        "
                      />
                    </div>

                    <h5 style="display: flex; justify-content: center">
                      {{ currentProduction.toFixed(2) }} kWh
                    </h5>
                    <small
                      class="text-muted mt-0"
                      style="
                        display: flex;
                        justify-content: center;
                        font-size: 16px;
                      "
                      >Current Production</small
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-lg-12 mb-lg-0 mb-4">
            <div class="card z-index-2 h-100">
              <div class="card-header" style="margin-left: 0; margin-right: 0">
                <h6>User Information</h6>
              </div>
              <div class="card-body d-flex pt-5 ps-1 pe-0" [ngStyle]="{'padding-bottom':canDeleteEdit==true? '2%' : '5%'}">
                <div class="col-lg-8 row">
                  <div class="container-fluid d-flex">
                    <div class="col-lg-6">
                      <h5 class="text-bold mb-0">{{ firstName }}</h5>
                      <small class="text-muted mt-0">First Name</small>
                    </div>
                    <div class="col-lg-6">
                      <h5 class="text-bold mb-0">{{ lastName }}</h5>
                      <small class="text-muted mt-0">Last Name</small>
                    </div>
                  </div>
                  <hr />
                  <div class="container-fluid d-flex">
                    <div class="col-lg-6">
                      <h5 class="text-bold mb-0">{{ username }}</h5>
                      <small class="text-muted mt-0">Username</small>
                    </div>
                    <div class="col-lg-6">
                      <h5 class="text-bold mb-0">{{ email }}</h5>
                      <small class="text-muted mt-0">E-mail</small>
                    </div>
                  </div>
                  <hr />
                  <div class="container-fluid d-flex">
                    <div class="col-lg-6">
                      <h5 class="text-bold mb-0">{{ address }}, {{neighName}}</h5>
                      <small class="text-muted mt-0">Address</small>
                    </div>
                    <div class="col-lg-6">
                      <h5 class="text-bold mb-0">{{ city }}</h5>
                      <small class="text-muted mt-0">City</small>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 row text-center mx-0 px-0">
                  <div
                    class="container-fluid pt-1"
                    style="
                      display: flex;
                      align-items: center;
                      justify-content: center;
                    "
                  >
                    <div style="padding-left: 3%;">
                      <img
                        [src]="imageSource"
                        alt="User Profile Picture"
                        class="rounded-circle"
                        style="width: 60%"
                      />
                    </div>
                  </div>
                  <div
                    class="container-fluid d-flex pe-0"
                    style="
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      margin-top: 7%;
                    "
                    *ngIf="letValue === 'Admin'"
                  >
                    <div
                      class="col-6"
                      style="
                        display: flex;
                        align-items: center;
                        justify-content: center;
                      "
                    >
                      <input
                        id="edit"
                        value="Edit"
                        routerLink="/DsoApp/user/{{ id }}"
                        (click)="openEdit()"
                        class="btn"
                        [disabled]="!canDeleteEdit"
                      />
                      <br />
                    </div>
                    <div
                      class="col-6"
                      style="
                        display: flex;
                        align-items: center;
                        justify-content: center;
                      "
                    >
                      <input
                        id="delete"
                        value="Delete"
                        (click)="DeleteUser()"
                        class="btn"
                        style="display: flex; justify-content: center"
                        [disabled]="!canDeleteEdit"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-lg-12 mb-lg-0 mb-4">
            <div class="card">
              <div class="card-header">
                <h6>Devices</h6>
              </div>
              <div class="card-body px-0 py-0 mx-0 my-0 pb-1">
                <app-tabelaUredjaja
                  #tabelaUredjaja
                  (current)="onCurrentValuesReceived($event)"
                ></app-tabelaUredjaja>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-5">
        <div class="card p-0 mb-4">
          <app-history-Prosumer #prosumerHistory></app-history-Prosumer>
        </div>
        <div class="card p-0 mb-4">
          <app-realization-chart-production #prosumerHistoryProduction ></app-realization-chart-production>
        </div>
        <div class="card p-0">
          <app-prediction-prosumer #prosumerPrediction></app-prediction-prosumer>
        </div>
      </div>
    </div>
  </div>
</main>

<app-popup-add></app-popup-add>
<app-popup-emp></app-popup-emp>
<app-worker-profile></app-worker-profile>
<div
  class="modal fade"
  id="exampleModal5"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header text-white" style="background-color: #5875a1">
        <h6>Edit User</h6>
        <button
          class="btn-close"
          aria-label="Close"
          id="closeBtn1"
          data-bs-dismiss="modal"
        ></button>
      </div>
      <div class="modal-body">
        <button [hidden]="true" id="resetDataInFormForEdit" (click)="resetData()"></button>
        <button [hidden]="true" id="closeModalEditProsumerData" data-bs-dismiss="modal" data-bs-target="#exampleModal5"></button>
        <button [hidden]="true" id="openEditFormProsumer" data-bs-toggle="modal" data-bs-target="#exampleModal5"></button>
        <div class="panelbor">
          <div class="panel-body">
            <div class="centralni">
              <div class="divinput row">
                <app-edit-prosumer-form #editProsumerProfileForm></app-edit-prosumer-form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
